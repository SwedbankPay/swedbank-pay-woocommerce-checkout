{"version":3,"sources":["invoice-fee.js"],"names":["jQuery","$","window","sb_helper","init","document","body","on","event","name","instrument","console","log","apply_fee","remove_fee","block","ajax","type","url","WC_Gateway_Swedbank_Pay_Checkout_Invoice","ajax_url","data","action","nonce","dataType","done","unblock","update_checkout","trigger","wc_sb_checkout","onUpdatedCheckout","message","overlayCSS","background","opacity","ready"],"mappings":"AACAA,OAAO,SAAUC,GACb,aAEAC,OAAOC,UAAY,CACfC,KAAM,WACFH,EAAEI,SAASC,MAAMC,GAAG,sCAAuC,SAAUC,EAAOC,EAAMC,GAC9EC,QAAQC,IAAIH,GAEO,YAAfC,EACAP,UAAUU,YAEVV,UAAUW,gBAKtBD,UAAW,WAIP,OAHAF,QAAQC,IAAI,qBACZT,UAAUY,QAEHd,EAAEe,KAAK,CACVC,KAAM,OACNC,IAAKC,yCAAyCC,SAC9CC,KAAM,CACFC,OAAQ,uBACRC,MAAOJ,yCAAyCI,OAEpDC,SAAU,SACXC,KAAK,WACJtB,UAAUuB,UACVvB,UAAUwB,qBAIlBb,WAAY,WAIR,OAHAH,QAAQC,IAAI,sBACZT,UAAUY,QAEHd,EAAEe,KAAK,CACVC,KAAM,OACNC,IAAKC,yCAAyCC,SAC9CC,KAAM,CACFC,OAAQ,uBACRC,MAAOJ,yCAAyCI,OAEpDC,SAAU,SACXC,KAAK,WACJtB,UAAUuB,UACVvB,UAAUwB,qBAIlBA,gBAAiB,WACb1B,EAAEI,SAASC,MAAMsB,QAAQ,mBACzBC,eAAeC,qBAGnBf,MAAO,WAEC,IADYd,EAAE,6DAA6DoB,OAC3D,sBAChBpB,EAAE,6DAA6Dc,MAAM,CACjEgB,QAAS,KACTC,WAAY,CACRC,WAAY,OACZC,QAAS,OAMzBR,QAAS,WACLzB,EAAE,6DAA6DyB,YAIvEzB,EAAEI,UAAU8B,MAAM,WACdjC,OAAOC,UAAUC","file":"invoice-fee.min.js","sourcesContent":["/* global wc_checkout_params */\njQuery(function ($) {\n    'use strict';\n\n    window.sb_helper = {\n        init: function () {\n            $(document.body).on('sb_payment_menu_instrument_selected', function (event, name, instrument) {\n                console.log(name);\n\n                if (instrument === 'Invoice') {\n                    sb_helper.apply_fee();\n                } else {\n                    sb_helper.remove_fee();\n                }\n            });\n        },\n\n        apply_fee: function () {\n            console.log('Apply invoice fee');\n            sb_helper.block();\n\n            return $.ajax({\n                type: 'POST',\n                url: WC_Gateway_Swedbank_Pay_Checkout_Invoice.ajax_url,\n                data: {\n                    action: 'sb_invoice_apply_fee',\n                    nonce: WC_Gateway_Swedbank_Pay_Checkout_Invoice.nonce\n                },\n                dataType: 'json'\n            }).done(function () {\n                sb_helper.unblock();\n                sb_helper.update_checkout();\n            });\n        },\n\n        remove_fee: function () {\n            console.log('Remove invoice fee');\n            sb_helper.block();\n\n            return $.ajax({\n                type: 'POST',\n                url: WC_Gateway_Swedbank_Pay_Checkout_Invoice.ajax_url,\n                data: {\n                    action: 'sb_invoice_unset_fee',\n                    nonce: WC_Gateway_Swedbank_Pay_Checkout_Invoice.nonce\n                },\n                dataType: 'json'\n            }).done(function () {\n                sb_helper.unblock();\n                sb_helper.update_checkout();\n            });\n        },\n\n        update_checkout: function () {\n            $(document.body).trigger('update_checkout');\n            wc_sb_checkout.onUpdatedCheckout();\n        },\n\n        block: function () {\n            let form_data = $(\"form.checkout, form#order_review, form#add_payment_method\").data();\n            if (1 !== form_data['blockUI.isBlocked']) {\n                $(\"form.checkout, form#order_review, form#add_payment_method\").block({\n                    message: null,\n                    overlayCSS: {\n                        background: '#fff',\n                        opacity: 0.6\n                    }\n                });\n            }\n        },\n\n        unblock: function () {\n            $(\"form.checkout, form#order_review, form#add_payment_method\").unblock();\n        },\n    };\n\n    $(document).ready(function () {\n        window.sb_helper.init();\n    });\n});\n\n"]}